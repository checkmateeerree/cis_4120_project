<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>File Manager - React</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Courier New', monospace;
            background: white;
            color: black;
            padding: 40px;
            line-height: 1.6;
        }

        h1 {
            font-size: 24px;
            font-weight: normal;
            margin-bottom: 40px;
            border-bottom: 2px solid black;
            padding-bottom: 10px;
        }

        h2 {
            font-size: 18px;
            font-weight: normal;
            margin-top: 30px;
            margin-bottom: 15px;
        }

        .upload-section {
            margin-bottom: 40px;
            border: 1px solid black;
            padding: 20px;
        }

        .upload-row {
            display: flex;
            gap: 20px;
            margin-top: 15px;
        }

        .upload-item {
            flex: 1;
        }

        button {
            background: white;
            color: black;
            border: 1px solid black;
            padding: 8px 16px;
            cursor: pointer;
            font-family: 'Courier New', monospace;
            font-size: 14px;
        }

        button:hover {
            background: black;
            color: white;
        }

        input[type="file"] {
            display: none;
        }

        .file-section {
            margin-bottom: 40px;
            border: 1px solid black;
            padding: 20px;
        }

        .file-list {
            margin-top: 15px;
        }

        .file-item {
            border-bottom: 1px solid #ddd;
            padding: 15px 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .file-item:last-child {
            border-bottom: none;
        }

        .file-name {
            flex: 1;
        }

        .file-actions {
            display: flex;
            gap: 10px;
        }

        .file-actions button {
            padding: 5px 12px;
            font-size: 12px;
        }

        .empty-state {
            padding: 20px;
            text-align: center;
            color: #666;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            z-index: 1000;
        }

        .modal.active {
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .modal-content {
            background: white;
            padding: 30px;
            max-width: 900px;
            max-height: 90vh;
            overflow: auto;
            border: 2px solid black;
            position: relative;
        }

        .modal-close {
            position: absolute;
            top: 10px;
            right: 10px;
            padding: 5px 15px;
        }

        .preview-container {
            margin-top: 20px;
        }

        .preview-container img {
            max-width: 100%;
            border: 1px solid black;
        }

        .preview-container audio {
            width: 100%;
            margin-top: 20px;
        }

        .preview-container iframe {
            width: 100%;
            height: 600px;
            border: 1px solid black;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState } = React;

        function FileManager() {
            const [files, setFiles] = useState({
                pdf: [],
                image: [],
                audio: []
            });
            const [modal, setModal] = useState({ active: false, content: null });

            const handleFileUpload = (event, type) => {
                const uploadedFiles = Array.from(event.target.files);
                
                uploadedFiles.forEach(file => {
                    const reader = new FileReader();
                    reader.onload = (e) => {
                        const fileData = {
                            id: Date.now() + Math.random(),
                            name: file.name,
                            data: e.target.result,
                            type: file.type
                        };
                        setFiles(prev => ({
                            ...prev,
                            [type]: [...prev[type], fileData]
                        }));
                    };
                    reader.readAsDataURL(file);
                });

                event.target.value = '';
            };

            const viewFile = (type, fileId) => {
                const file = files[type].find(f => f.id === fileId);
                if (!file) return;

                let content;
                if (type === 'pdf') {
                    content = <iframe src={file.data}></iframe>;
                } else if (type === 'image') {
                    content = <img src={file.data} alt={file.name} />;
                } else if (type === 'audio') {
                    content = (
                        <>
                            <h3>{file.name}</h3>
                            <audio controls autoPlay>
                                <source src={file.data} type={file.type} />
                            </audio>
                        </>
                    );
                }

                setModal({ active: true, content });
            };

            const renameFile = (type, fileId) => {
                const file = files[type].find(f => f.id === fileId);
                if (!file) return;

                const newName = prompt('Enter new file name:', file.name);
                if (newName && newName.trim()) {
                    setFiles(prev => ({
                        ...prev,
                        [type]: prev[type].map(f => 
                            f.id === fileId ? { ...f, name: newName.trim() } : f
                        )
                    }));
                }
            };

            const deleteFile = (type, fileId) => {
                if (confirm('Are you sure you want to delete this file?')) {
                    setFiles(prev => ({
                        ...prev,
                        [type]: prev[type].filter(f => f.id !== fileId)
                    }));
                }
            };

            const closeModal = () => {
                setModal({ active: false, content: null });
            };

            return (
                <>
                    <h1>File Manager</h1>

                    <div className="upload-section">
                        <h2>Upload Files</h2>
                        <div className="upload-row">
                            <div className="upload-item">
                                <button onClick={() => document.getElementById('pdf-upload').click()}>
                                    Upload PDF
                                </button>
                                <input
                                    type="file"
                                    id="pdf-upload"
                                    accept=".pdf"
                                    multiple
                                    onChange={(e) => handleFileUpload(e, 'pdf')}
                                />
                            </div>
                            <div className="upload-item">
                                <button onClick={() => document.getElementById('image-upload').click()}>
                                    Upload Image
                                </button>
                                <input
                                    type="file"
                                    id="image-upload"
                                    accept=".png,.jpg,.jpeg"
                                    multiple
                                    onChange={(e) => handleFileUpload(e, 'image')}
                                />
                            </div>
                            <div className="upload-item">
                                <button onClick={() => document.getElementById('audio-upload').click()}>
                                    Upload Audio
                                </button>
                                <input
                                    type="file"
                                    id="audio-upload"
                                    accept=".mp3"
                                    multiple
                                    onChange={(e) => handleFileUpload(e, 'audio')}
                                />
                            </div>
                        </div>
                    </div>

                    <FileSection
                        title="PDF Documents"
                        files={files.pdf}
                        type="pdf"
                        onView={viewFile}
                        onRename={renameFile}
                        onDelete={deleteFile}
                    />

                    <FileSection
                        title="Images"
                        files={files.image}
                        type="image"
                        onView={viewFile}
                        onRename={renameFile}
                        onDelete={deleteFile}
                    />

                    <FileSection
                        title="Audio Files"
                        files={files.audio}
                        type="audio"
                        onView={viewFile}
                        onRename={renameFile}
                        onDelete={deleteFile}
                    />

                    <div className={`modal ${modal.active ? 'active' : ''}`} onClick={(e) => {
                        if (e.target.className.includes('modal')) closeModal();
                    }}>
                        <div className="modal-content">
                            <button className="modal-close" onClick={closeModal}>Close</button>
                            <div className="preview-container">
                                {modal.content}
                            </div>
                        </div>
                    </div>
                </>
            );
        }

        function FileSection({ title, files, type, onView, onRename, onDelete }) {
            return (
                <div className="file-section">
                    <h2>{title}</h2>
                    <div className="file-list">
                        {files.length === 0 ? (
                            <div className="empty-state">No files uploaded</div>
                        ) : (
                            files.map(file => (
                                <div key={file.id} className="file-item">
                                    <div className="file-name">{file.name}</div>
                                    <div className="file-actions">
                                        <button onClick={() => onView(type, file.id)}>
                                            {type === 'audio' ? 'Play' : 'View'}
                                        </button>
                                        <button onClick={() => onRename(type, file.id)}>Rename</button>
                                        <button onClick={() => onDelete(type, file.id)}>Delete</button>
                                    </div>
                                </div>
                            ))
                        )}
                    </div>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<FileManager />);
    </script>
</body>
</html>